---
keyword: [防护模式, 高级防护, 模块适配, 通用设置]
---

# 应用基础设置

在应用管理页面的基础设置中，您可以切换防护模式来提升系统防护能力，配置Web应用触发流控等规则后的处理逻辑，以及设置簇点数目限制、来源数目限制等信息。本文介绍如何进行应用的基础设置。

## 前提条件

若需使用模块适配设置和通用设置，则需满足以下条件：

-   若使用SDK方式接入，则确保ahas-sentinel-client为1.5.0或以上版本。
-   若使用Agent方式接入，则确保Agent为1.7.1或以上版本。

## 功能入口

1.  登录[AHAS控制台](https://ahas.console.aliyun.com/)。
2.  在AHAS控制台左上角，选择应用接入的**地域**。
3.  在控制台左侧导航栏中选择**流量防护** \> **应用防护**。
4.  在应用防护页面单击目标应用卡片。
5.  在左侧导航栏单击**应用管理**，然后单击**基础设置**页签。

## 设置适配模块

通过设置适配模块功能，可以动态配置Web类型应用触发流控等规则后的处理逻辑。具体操作步骤如下：

1.  在模块适配设置区域单击目标应用**操作**列的**修改**。
2.  在模块适配设置修改对话框中配置参数。

    |参数|描述|示例值|
    |--|--|---|
    |**Web fallback行为**|定义Web接口访问触发某种规则后的行为表现。目前支持以下两种策略：    -   返回指定内容：需设置HTTP状态码、返回内容的格式和返回的内容。表示Web接口访问触发规则后返回自定义的内容。
    -   跳转到指定页面：需设置指定跳转的URL。表示Web接口访问触发规则后系统会跳转指定的页面URL。
|返回指定内容|
    |**HTTP状态码**|默认429。当Web限流处理策略为自定义返回时，需要填写。|429|
    |**返回content-type**|设置返回内容的格式为普通文本（TEXT）或JSON。当Web限流处理策略为自定义返回时，需要填写。|JSON字符串|
    |**HTTP返回文本**|输入当Web接口访问触发规则后返回的内容。当Web限流处理策略为自定义返回时，需要填写。|\{"message": "blocked oops"\}|
    |**跳转URL**|输入当Web接口访问触发规则后系统会跳转的页面URL。当Web限流处理策略为跳转到指定页面时，需要填写。**说明：** 跳转的本质是返回302状态码。对于后端服务直接渲染返回的页面，跳转是有效的；对于前端通过AJAX请求到后端服务后，再解析后端返回到前端展示的页面，跳转无效。

|http://ahas.console.aliyun.com|

3.  单击**确定**。

**说明：**

-   适配模块配置的配置项会覆盖JVM参数传入的相关配置项。
-   适配模块配置仅针对默认的Web流控处理逻辑生效。若您注册了自定义的UrlBlockHandler，则适配模块配置无效。

## 设置通用配置

通过通用设置功能可修改应用的簇点数目限制、来源数目限制、入口数目限制和最大统计RT等配置。具体步骤如下：

1.  在通用设置区域**操作**列单击**修改**。
2.  在对话框中按需配置**簇点数目限制**、**来源数目限制**、**入口数目限制**和**最大统计RT**。

    |配置项|说明|
    |---|--|
    |**簇点数目限制**|限制埋点资源数，默认6000。建议设置限制不超过6000，当实际资源数超过6000时，会导致占用内存较大。|
    |**来源数目限制**|限制每个资源下来源节点数，用于按调用来源限流。|
    |**入口数目限制**|限制入口context数，用于链路限流。|
    |**最大统计RT**|限制统计的最大RT（ms），默认为4900 ms。当统计数超出设置上限时，则按照设置上限记录统计数。|

3.  单击**确定**。

