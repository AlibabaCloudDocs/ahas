# 基本概念

本文列出了MSHA专有名词和其它相关术语的解释，帮助您了解和使用MHSA。

## MSHA专有名词解释

|名词|说明|
|--|--|
|MSHA|Multi-Site High Availability，即多活容灾产品简称。|
|命名空间

|多活命名空间MSHA Namespace，是一个逻辑租户的概念，用于进行租户粒度的管控配置和云资源隔离。例如，交易单元化的测试环境，交易单元化的正式环境，导购单元化的测试环境。|
|Route\_Type（Unit\_Type）|多活业务类型。根据业务特性，将链路⾃闭环的业务划分成⼀个业务类型，业务类型之间极少重合。例如，导购类型、交易类型、电商小⼆类型、电⼦⾯单类型等等。|
|Region|地域，例如，华东1、华东2。|
|AZ|可用区，⼀个地域下有多个可⽤区。|
|Unit|单元。-   据业务特点在逻辑上分成⼏个逻辑数据中⼼（LDC），命名为单元。核⼼业务在各数据中⼼（LDC）实现⾃流转。
-   Center，特殊的单元，是⼀些⻓尾没有做单元化改造的业务和⼀些强中⼼⽆法进⾏单元化改造的业务所在的数据中⼼（LDC）。 |
|Cell|单元格。|
|同城双活|同个城市部署两个数据中⼼，并⾏的为业务访问提供服务。|
|异地多活|不同城市部署多个数据中心。-   多活⼀⽅⾯是多数据中⼼之间地位均等，正常模式下协同⼯作，并⾏的为业务访问提供服务，实现了对资源的充分利⽤，避免⼀个或两个备份中⼼处于闲置状态，造成资源与投资浪费。
-   另一方面是在⼀个数据中⼼发⽣故障或灾难的情况下，其他数据中⼼可以正常运⾏并对关键业务或全部业务实现接管，实现⽤⼾的故障⽆感知。 |
|两地三中⼼|即⽣产数据中⼼、同城灾备中⼼、异地灾备中⼼建设⽅案。这种模式下，两个城市的三个数据中⼼互联互通，如果⼀个数据中⼼发⽣故障或灾难，其他数据中⼼可以正常运⾏并对关键业务或全部业务实现接管。|

## MSHA管控面名词

|名词|说明|
|--|--|
|routeId|路由标。分为静态路由标和动态路由标。静态路由标一般采用业务系统账号ID、地理位置等静态属性作为路由计算的输入，动态路由标则由业务系统自定义。|
|接入层路由标提取方式|接入层Tengine从HTTP请求信息中提取路由标的方式。需要跟业务系统约定好接入层路由标提取方式，并由业务系统将流量的路由标设置进HTTP请求header或cookie的约定key值中。当流量到达多活接入层后由Tengine进行提取识别，以便对流量进行路由计算和纠错处理。|
|路由标解析规则|用于定义如何解析路由标的逻辑。可以使用函数来表达该解析过程：parsedRouteId=funcExtract\(routeId\)。解析规则分为精准、范围2种类型：

-   精准：路由标解析逻辑没有限制，后续路由规则routeRule配置时采用白名单的方式来配置各单元的路由标名单。
-   范围：解析逻辑生成的路由标固定落到一个数值范围中，后续路由规则routeRule配置时按照范围区间来配置各单元的路由规则。 |
|routeRule|路由规则。即路由标和目标单元的映射规则。|
|MSFE|MSHA-FRONT-END，即接⼊层，负责⼊口流量的分发及修正职能。|
|集群|一个集群指容器运行所需要的云资源组合，关联了若干服务器节点、负载均衡、专有网络等云资源。|
|服务类型|-   Unit，单元服务。主要是指服务的调用必须按照单元规则来进行调用，服务调用根据RouterId和业务类型来进行正确的选址和调用保护。只有服务所在单元和RouterId归属单元一致，服务才能正常发起调用。单元服务调用遵循单元封闭的原则。
-   Center，中心服务。该类服务只能在中心单元（北京）发布（虽然业务一致，但发布时注册中心会忽略单元里的服务注册）所有依赖中心服务的其他单元，都要去中心单元进行服务的调用。这种服务应该尽量减少，只有那些无法接受最终一致的服务才需要标记成中心服务，如库存服务，扣减库存时，只能调中心服务去扣除。
-   Common，普通服务。主要是指一些无法按选中的单元维度拆分但又被单元服务依赖的服务，一般是只读的，如字典服务、商品信息等，没有写操作，各个单元提供的服务功能一致。 |

## 其他术语

|名词|说明|
|--|--|
|RPO|Recovery Point Object，即数据恢复点目标，以时间为单位，即在灾难发生时，系统和数据必须恢复的时间点要求。RPO标志系统能够容忍的最大数据丢失量。系统容忍丢失的数据量越小，RPO的值越小。|
|RTO|RecoveryTime Object，即恢复时间目标，以时间为单位，即在灾难发生后，信息系统或业务功能从停止到必须恢复的时间要求。RTO标志系统能够容忍的服务停止的最长时间。系统服务的紧迫性要求越高，RTO的值越小。|
|BCM|Business Continuity Management，即业务连续性管理。使用MSHA可提升此项指标。|
|EDAS|Enterprise Distributed Application Service，即企业级分布式应⽤服务平台，是⼀个应⽤托管和微服务管理的PaaS平台，提供应⽤开发、部署、监控、运维等全栈式解决⽅案，同时⽀持Apache Dubbo、Spring Cloud等微服务运⾏环境，助⼒应⽤轻松上云。|

