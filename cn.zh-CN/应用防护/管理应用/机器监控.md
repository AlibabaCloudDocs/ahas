---
keyword: [QPS, 节点数据, JVM进程]
---

# 机器监控

在机器监控页面，主要展示了所有节点的通过QPS、限流QPS、异常QPS、RT、并发等指标，还可以在此页面为接口管理流控规则。一个节点对应一个JVM进程，当多个JVM接入单机后，即展示为多个节点。本文介绍机器监控页的主要功能。

## 功能入口

1.  登录[AHAS控制台](https://ahas.console.aliyun.com/)。
2.  在AHAS控制台左上角，选择应用接入的地域。
3.  在控制台左侧导航栏中选择**流量防护** \> **应用防护**。
4.  在应用防护页面单击目标应用卡片。
5.  在左侧导航栏中选择**机器监控**。

## 功能介绍

机器监控页面展示了应用的所有节点详细信息以及这些节点的QPS、CPU、LOAD时序图。

![机器监控](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9119900161/p135246.png)

您可以在此页面进行以下操作：

-   （图标①）在页面右上角选择**回放时间**，查看该时间前5分钟内的历史数据。

    **说明：** 最多保留7天的历史数据。

-   （图标②）在节点名称区域，罗列了全部节点和对应的通过QPS、限流QPS、异常QPS、RT等信息。单击节点名称可以查看对应的各数据时序图。
-   （图标③）在时序图区域，可以进行以下操作：
    -   在时序图区域，可以选择要展示或隐藏的指标，还可以选择接口指标的展现形式。

        -   **节点对比**：各接口以卡片的形式展现各接口的数据。
        -   **集群统计**：以QPS、RT、并发各数据的统计维度展现接口的数据。
        **说明：** 模式的切换仅在全部接口场景下支持。

    -   在**节点概览**页签，单击**QPS**、**CPU**、**LOAD**等页签，可以分别查看全部节点相关指标的时序图，还可以选择要展示或隐藏的指标。
    -   在**JVM监控**页签，单击**GC次数**、**GC耗时**等页签，可以查看全部节点JVM的数据。
    -   单击![历史记录](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1322119951/p135196.png)图标，可以查看该接口指标的历史数据。

        **说明：** 最多保留7天的历史数据。

    -   单击节点名称后，会在右侧**节点概览**页展示该节点对应的各数据时序图。
        -   单击**JVM监控**页签，查看该接口的GC次数、GC耗时等时序图。
        -   单击**接口详情**页签，筛选查看不同接口的数据。
        -   单击**callstack信息**页签，查看所有接口的信息，并可以设置该接口的限流规则、查看历史数据。
            -   **平铺展示**：不区分调用链路关系，平铺展示接口的运行情况。
            -   **树状展示**：根据接口的调用链路关系，展示树状结构。
            -   单击目标接口**操作**列中的**流控**、**隔离**或**降级**，可以快速管理限流规则。更多信息，请参见[配置流控规则](/cn.zh-CN/应用防护/配置规则/配置流控规则.md)、[配置隔离规则](/cn.zh-CN/应用防护/配置规则/配置隔离规则.md)和[配置熔断规则](/cn.zh-CN/应用防护/配置规则/配置熔断规则.md)。
            -   单击目标接口**操作**列中的**更多** \> **查看监控**，可查看该接口指标的历史数据和数据对比情况。
        -   单击**异常统计**页签，查看该应用近5分钟的异常情况。
            -   单击异常统计数据柱形图中的柱形，则在右侧异常TOP列表中，展示该异常的具体接口、类型、次数。
            -   单击异常统计数据右上角的**历史数据**，可以查看任意时间段发生的异常次数，最多可以查看7天内的历史数据。
            -   您在异常统计数据区域查看到异常数据后，可在应用本地日志中查看异常记录。

                **说明：** 控制台查看以秒为单位的异常统计情况，异常详细内容您可以在本地异常记录文件中查看。

                -   异常记录的文件地址：与metrics.log同个目录。
                -   异常记录的文件名称：
                    -   \{appName\}-ahas\_exceptions.log.\{日期，精确到天\}
                    -   \{appName\}-ahas\_exceptions.log.\{日期，精确到天\}.idx
                -   异常记录格式：`{时间戳}|{时间，精确到毫秒}|{异常接口}|{异常详情}`
                样例如下所示：

                ```
                1619749703000|2021-04-30 10:28:23.062|/exception1|com.alibaba.csp.sentinel.demo.exception.TestException: test exception_1 15
                1619749703000|2021-04-30 10:28:23.065|/exception|com.alibaba.csp.sentinel.demo.exception.AnotherException: test another exception 71
                1619749705000|2021-04-30 10:28:25.065|/exception1|com.alibaba.csp.sentinel.demo.exception.TestException: test exception_1 38
                ```


