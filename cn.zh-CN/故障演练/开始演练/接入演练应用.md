---
keyword: [故障演练应用, 故障演练探针, 接入应用, ack-ahas-pilot]
---

# 接入演练应用

故障演练支持接入容器服务Kubernetes应用以及Java、GO、PHP等语言的应用，本文介绍如何在故障演练中接入新应用。

## 接入Java应用

通过配置JVM启动参数来指定应用和应用分组，用于精确划分该机器所归属的应用或应用分组（与安装探针时指定的应用或应用分组不冲突）。

1.  配置JVM启动参数。

    AppName只能包含字母、数字和特殊字符下划线（\_）和短划线（-）。

    ```
    -Dproject.name=应用名 -Dproject.group.name=应用分组名
    ```

    请根据实际情况替换以上的值，上述配置默认值如下：

    -   `project.name`：默认值`ahas-default-app`。
    -   `project.group.name`：默认值`ahas-default-app-group`。
    **说明：** 在已部署故障演练探针的机器上，修改JVM启动参数并重启，应用会自动识别并生效，无需重新部署故障演练探针。

2.  启动应用。

3.  登录[AHAS控制台](https://ahas.console.aliyun.com)，在左侧导航栏单击**探针管理**，进入探针管理页面，单击右上角**安装故障演练探针**。

4.  在**选择环境**页面单击**阿里云ECS**。

5.  在安装应用高可用探针页面安装探针，在目标主机右侧**操作**列单击**单击安装**。

6.  填写应用、应用分组信息。

    -   已有应用，则选择应用名称与应用分组，单击**安装**。
    -   新增应用，则填写应用名称与应用分组，单击**安装**。
7.  单击**下一步**，查看已安装的探针。

8.  单击**完成**。


## 接入Kubernetes容器化应用

通过Pod标签识别其所归属的应用或应用分组，配置如下。

1.  配置Pod标签。

    标签的值只能包含字母、数字和特殊字符下划线（\_）和短划线（-）。

    在模板（YAML格式）中将以下lables配置添加到spec \> template \> labels层级下：

    ```
    labels:
    ahas.aliyun/app-instance: 应用名
    ahas.aliyun/app-group: 应用分组名
    ```

    根据实际情况替换以上的值，如果不配置以上的值，会再次识别是否包含`app-group-name`（容器服务应用配置）、`edas.oam.acname`（EDAS应用配置）、`app`、`k8s-app`标签配置作为应用名，应用分组名格式默认为：应用名-group。

    根据标签识别应用，标签优先级如下：ahas.aliyun/app-instance \> app-group-name \> edas.oam.acname \> app \> k8s-app。

    **说明：** 在已部署故障演练探针的集群，修改Pod标签即可生效，无需重新部署故障演练探针。

2.  登录[AHAS控制台](https://ahas.console.aliyun.com)，在左侧导航栏单击**探针管理**，进入探针管理页面，单击右上角**安装故障演练探针**。

3.  在**选择环境**页面单击**容器服务**，创建ack-ahas-pilot。具体操作，请参见[架构感知监控](/cn.zh-CN/Kubernetes集群用户指南/可观测性/监控管理/架构感知监控.md)。


## 接入其他应用

通过主机部署，接入其他应用操作步骤如下。

1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，在左侧导航栏单击**探针管理**，进入探针管理页面，单击右上角**安装故障演练探针**。

2.  在**选择环境**页面单击**阿里云ECS**。

3.  在安装应用高可用探针页面安装探针，在目标主机右侧**操作**列单击**单击安装**。

4.  填写应用、应用分组信息。

    -   已有应用，则选择应用名称与应用分组，单击**安装**。
    -   新增应用，则填写应用名称与应用分组，单击**安装**。
5.  单击**下一步**，查看已安装的探针。

6.  单击**完成**。


