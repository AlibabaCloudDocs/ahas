---
keyword: [安装探针, 升级探针, 卸载探针]
---

# 管理探针

应用高可用服务AHAS会通过探针从您的系统中采集所需的信息。本文介绍了如何安装、升级、停止和卸载探针。

## 什么是探针？

应用高可用服务AHAS包括以下两种探针：

-   应用高可用探针（即AHAS探针）：这是安装在操作系统上的独立进程，用来采集架构信息。使用架构感知、故障演练功能前需安装此探针。
-   应用高可用Java探针：这是针对JVM的Java探针，通过字节码增强技术进行实时监控和流量防护。如果需要使用流量防护功能，可安装此探针。

## 安装高可用探针（AHAS探针）

如果您需要使用架构感知、故障演练功能，则需安装此探针。

1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，然后在页面左上角选择**地域**。

2.  在左侧导航栏选择**探针管理**。

3.  在探针管理页面右上角单击**安装架构感知探针**或**安装故障演练探针**。

4.  请选择您要安装的探针环境，根据不同的环境，选择不同的安装方式。

    -   阿里云ECS：如果您需要安装的探针环境为阿里云ECS，请单击**阿里云ECS**，具体操作，请参见[快速接入ECS](/cn.zh-CN/架构感知/接入应用/快速接入 ECS.md)。
    -   自建Kubernetes：如果您需要安装的探针环境为自建Kubernetes集群，请单击**自建Kubernetes**，具体操作，请参见[手动接入自建K8s集群](/cn.zh-CN/架构感知/接入应用/手动接入自建 K8s 集群.md)。
    -   容器服务：如果您需要安装的探针环境为容器服务ACK集群，请单击**容器服务**，具体操作，请参见[接入容器服务](/cn.zh-CN/架构感知/接入应用/接入容器服务 K8s 版.md)。

## 安装高可用Java探针

如果您需要使用流量防护功能，则需安装此探针。

1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，然后在页面左上角选择**地域**。

2.  在左侧导航栏选择**探针管理**。

3.  在探针管理页面，单击**添加流量防护**。

4.  根据不同的应用接入方式，选择不同的安装探针方法。具体操作，请参见[接入应用方式](/cn.zh-CN/流量防护/应用防护/接入应用/接入应用方式.md)。


## 升级高可用探针（AHAS探针）

升级AHAS探针的操作步骤如下：

-   2018年12月21日及以后安装的AHAS探针可以实现自动升级，无需任何操作。
-   如果您的AHAS探针是2018年12月21日之前安装的，建议您卸载AHAS探针，重新安装最新版本。具体操作，请参见[卸载AHAS探针](#section_gv4_mdl_ngb)。

## 停止高可用探针（AHAS探针）

1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，然后在页面左上角选择**地域**。

2.  在左侧导航栏选择**探针管理**。

3.  在探针管理页面，单击探针**操作**列中的**停止**。


## 卸载高可用探针（AHAS探针）

如果您不再需要使用AHAS探针，建议您及时卸载AHAS探针。否则系统会定时检查AHAS进程是否存在，如进程不存在，系统会自动重启该进程。每次您的主机重启时，AHAS探针进程也会自动重启。

您可以通过控制台卸载AHAS探针，或者执行卸载AHAS探针脚本。

-   通过控制台卸载AHAS探针：
    1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，然后在页面左上角选择**地域**。
    2.  在左侧导航栏选择**探针管理**。
    3.  在探针管理页面上，单击探针**操作**列中的**卸载**。
-   使用以下命令，手动卸载AHAS探针：

    ```
    //请根据您的实际环境替换AHAS Agent地址，或参考控制台的命令行引导。
    wget -q <AHAS Agent地址>/agent/prod/latest/aliyunahasctl.sh -O /tmp/aliyunahasctl.sh && sh /tmp/aliyunahasctl.sh uninstall
    ```

    您也可以单击**操作**列的**手动卸载**，获取手动卸载AHAS探针的具体命令。


## 卸载高可用Java探针

1.  登录[AHAS控制台](https://ahas.console.aliyun.com)，然后在页面左上角选择**地域**。

2.  在左侧导航栏选择**探针管理**。

3.  在探针管理页面上，选择**限流降级探针**，在需要卸载Java探针的机器**操作**列单击**手动卸载**。

    根据不同的探针环境选择不同的卸载方式，具体操作，请参见[如何卸载应用防护的Java Agent和SDK埋点？](/cn.zh-CN/常见问题/流量防护/如何卸载应用防护的Java Agent和SDK埋点？.md)。


